<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartFarm AI | Enterprise Analytics Platform</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', sans-serif;
            background: #0d1117;
            color: #c9d1d9;
            overflow-x: hidden;
        }

        /* Navigation */
        .navbar {
            background: linear-gradient(135deg, #161b22 0%, #0d1117 100%);
            border-bottom: 1px solid #21262d;
            padding: 0 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 65px;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
        }

        .nav-brand {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .brand-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, #58a6ff 0%, #1f6feb 100%);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3em;
        }

        .brand-text {
            font-size: 1.4em;
            font-weight: 600;
            color: #58a6ff;
        }

        .nav-links {
            display: flex;
            gap: 5px;
            list-style: none;
        }

        .nav-link {
            color: #8b949e;
            text-decoration: none;
            padding: 10px 18px;
            border-radius: 6px;
            font-size: 0.9em;
            font-weight: 500;
            transition: all 0.2s;
        }

        .nav-link:hover, .nav-link.active {
            background: rgba(88, 166, 255, 0.1);
            color: #58a6ff;
        }

        .nav-actions {
            display: flex;
            gap: 12px;
        }

        .nav-btn {
            background: rgba(88, 166, 255, 0.1);
            border: 1px solid #21262d;
            color: #58a6ff;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85em;
            transition: all 0.2s;
        }

        .nav-btn:hover {
            background: rgba(88, 166, 255, 0.15);
            border-color: #58a6ff;
        }

        /* Main Container */
        .container {
            padding: 30px 40px;
            max-width: 1600px;
            margin: 0 auto;
        }

        /* Header Stats */
        .stats-header {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: #161b22;
            border: 1px solid #21262d;
            border-radius: 8px;
            padding: 24px;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, #58a6ff, #1f6feb);
        }

        .stat-label {
            color: #8b949e;
            font-size: 0.85em;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 2.2em;
            font-weight: 700;
            color: #58a6ff;
            margin-bottom: 8px;
        }

        .stat-change {
            font-size: 0.85em;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .stat-change.positive {
            color: #3fb950;
        }

        .stat-change.negative {
            color: #f85149;
        }

        /* Panel */
        .panel {
            background: #161b22;
            border: 1px solid #21262d;
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 20px;
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #21262d;
        }

        .panel-title {
            font-size: 1.15em;
            font-weight: 600;
            color: #c9d1d9;
        }

        .panel-badge {
            background: rgba(88, 166, 255, 0.1);
            color: #58a6ff;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.75em;
            font-weight: 600;
        }

        /* Filters */
        .filters {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .filter-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .filter-label {
            font-size: 0.8em;
            color: #8b949e;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .filter-select, .filter-input {
            background: #0d1117;
            border: 1px solid #21262d;
            color: #c9d1d9;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.9em;
            min-width: 180px;
        }

        .filter-select:focus, .filter-input:focus {
            outline: none;
            border-color: #58a6ff;
        }

        .filter-btn {
            background: #238636;
            border: none;
            color: white;
            padding: 8px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85em;
            font-weight: 500;
            transition: all 0.2s;
            align-self: flex-end;
        }

        .filter-btn:hover {
            background: #2ea043;
        }

        .clear-btn {
            background: transparent;
            border: 1px solid #21262d;
            color: #8b949e;
        }

        .clear-btn:hover {
            background: rgba(139, 148, 158, 0.1);
            border-color: #8b949e;
        }

        /* Data Table */
        .data-table-container {
            overflow-x: auto;
        }

        .data-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.9em;
        }

        .data-table thead {
            background: #0d1117;
            position: sticky;
            top: 0;
        }

        .data-table th {
            padding: 12px;
            text-align: left;
            font-weight: 600;
            color: #8b949e;
            border-bottom: 1px solid #21262d;
            cursor: pointer;
            user-select: none;
            white-space: nowrap;
        }

        .data-table th:hover {
            color: #58a6ff;
        }

        .data-table th.sortable::after {
            content: ' ⇅';
            opacity: 0.3;
        }

        .data-table th.sorted-asc::after {
            content: ' ↑';
            opacity: 1;
            color: #58a6ff;
        }

        .data-table th.sorted-desc::after {
            content: ' ↓';
            opacity: 1;
            color: #58a6ff;
        }

        .data-table td {
            padding: 12px;
            border-bottom: 1px solid #21262d;
        }

        .data-table tr:hover {
            background: rgba(88, 166, 255, 0.05);
        }

        .status-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .status-excellent { background: #3fb950; }
        .status-good { background: #58a6ff; }
        .status-fair { background: #d29922; }
        .status-poor { background: #f85149; }

        /* Charts */
        .chart-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .chart-container {
            height: 320px;
            position: relative;
        }

        /* Chatbot */
        .chatbot-container {
            position: fixed;
            bottom: 30px;
            right: 30px;
            z-index: 999;
        }

        .chatbot-toggle {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background: linear-gradient(135deg, #58a6ff 0%, #1f6feb 100%);
            border: none;
            color: white;
            cursor: pointer;
            box-shadow: 0 8px 24px rgba(88, 166, 255, 0.3);
            transition: all 0.3s;
            font-size: 1.3em;
        }

        .chatbot-toggle:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 32px rgba(88, 166, 255, 0.5);
        }

        .chatbot-window {
            position: absolute;
            bottom: 70px;
            right: 0;
            width: 380px;
            height: 550px;
            background: #161b22;
            border: 1px solid #21262d;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.6);
            display: none;
            flex-direction: column;
        }

        .chatbot-window.active {
            display: flex;
        }

        .chatbot-header {
            background: linear-gradient(135deg, #58a6ff 0%, #1f6feb 100%);
            padding: 18px;
            border-radius: 12px 12px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chatbot-title {
            font-weight: 600;
            font-size: 1.05em;
        }

        .chatbot-close {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 1.5em;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            transition: background 0.2s;
        }

        .chatbot-close:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .chatbot-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .chatbot-messages::-webkit-scrollbar {
            width: 6px;
        }

        .chatbot-messages::-webkit-scrollbar-thumb {
            background: #21262d;
            border-radius: 3px;
        }

        .chat-message {
            max-width: 85%;
            padding: 10px 14px;
            border-radius: 8px;
            font-size: 0.88em;
            line-height: 1.5;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .chat-message.bot {
            background: #0d1117;
            border: 1px solid #21262d;
            align-self: flex-start;
        }

        .chat-message.user {
            background: #1f6feb;
            align-self: flex-end;
        }

        .quick-actions {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
            margin-top: 8px;
        }

        .quick-action {
            background: #0d1117;
            border: 1px solid #21262d;
            color: #58a6ff;
            padding: 5px 10px;
            border-radius: 12px;
            font-size: 0.8em;
            cursor: pointer;
            transition: all 0.2s;
        }

        .quick-action:hover {
            background: rgba(88, 166, 255, 0.1);
            border-color: #58a6ff;
        }

        .chat-typing {
            display: none;
            align-self: flex-start;
            padding: 10px 14px;
            background: #0d1117;
            border: 1px solid #21262d;
            border-radius: 8px;
        }

        .chat-typing.active {
            display: block;
        }

        .typing-dots {
            display: flex;
            gap: 4px;
        }

        .typing-dot {
            width: 6px;
            height: 6px;
            background: #58a6ff;
            border-radius: 50%;
            animation: typing 1.4s infinite;
        }

        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }

        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); opacity: 0.5; }
            30% { transform: translateY(-8px); opacity: 1; }
        }

        .chatbot-input-area {
            padding: 15px;
            background: #0d1117;
            border-top: 1px solid #21262d;
            display: flex;
            gap: 10px;
        }

        .chatbot-input {
            flex: 1;
            background: #161b22;
            border: 1px solid #21262d;
            border-radius: 6px;
            padding: 10px;
            color: #c9d1d9;
            font-size: 0.88em;
        }

        .chatbot-input:focus {
            outline: none;
            border-color: #58a6ff;
        }

        .chatbot-send {
            background: #1f6feb;
            border: none;
            color: white;
            padding: 10px 18px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .chatbot-send:hover {
            background: #58a6ff;
        }

        /* Pagination */
        .pagination {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
        }

        .pagination-info {
            color: #8b949e;
            font-size: 0.85em;
        }

        .pagination-controls {
            display: flex;
            gap: 8px;
        }

        .page-btn {
            background: #161b22;
            border: 1px solid #21262d;
            color: #c9d1d9;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.85em;
            transition: all 0.2s;
        }

        .page-btn:hover:not(:disabled) {
            background: rgba(88, 166, 255, 0.1);
            border-color: #58a6ff;
        }

        .page-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        .page-btn.active {
            background: #1f6feb;
            border-color: #1f6feb;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .navbar {
                flex-direction: column;
                height: auto;
                padding: 15px 20px;
            }
            
            .nav-links {
                margin: 10px 0;
            }
            
            .stats-header {
                grid-template-columns: 1fr;
            }
            
            .chart-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-brand">
            <div class="brand-icon">SF</div>
            <div class="brand-text">SmartFarm AI</div>
        </div>
        <ul class="nav-links">
            <li><a href="#" class="nav-link active" onclick="switchView('dashboard'); return false;">Dashboard</a></li>
            <li><a href="#" class="nav-link" onclick="switchView('analytics'); return false;">Analytics</a></li>
            <li><a href="#" class="nav-link" onclick="switchView('livestock'); return false;">Livestock</a></li>
            <li><a href="#" class="nav-link" onclick="switchView('reports'); return false;">Reports</a></li>
            <li><a href="#" class="nav-link" onclick="switchView('settings'); return false;">Settings</a></li>
        </ul>
        <div class="nav-actions">
            <button class="nav-btn"><i class="fas fa-bell"></i> Alerts (0)</button>
            <button class="nav-btn"><i class="fas fa-user"></i> Profile</button>
        </div>
    </nav>

    <!-- Main Container -->
    <div class="container">
        <!-- Dashboard View -->
        <div id="dashboardView" class="view-section">
            <!-- Stats Header -->
            <div class="stats-header">
                <div class="stat-card">
                    <div class="stat-label">Total Milk Production</div>
                    <div class="stat-value" id="totalMilk">8,947L</div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-up"></i> 15.2% vs last month
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Average Health Score</div>
                    <div class="stat-value">91.8%</div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-up"></i> 3.4% improvement
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Feed Efficiency</div>
                    <div class="stat-value">87.5%</div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-up"></i> 12.1% optimized
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Revenue (30 Days)</div>
                    <div class="stat-value">₹3.58L</div>
                    <div class="stat-change positive">
                        <i class="fas fa-arrow-up"></i> ₹42K increase
                    </div>
                </div>
            </div>

            <!-- Charts Grid -->
            <div class="chart-grid">
                <div class="panel">
                    <div class="panel-header">
                        <div class="panel-title">Milk Production Trends (30 Days)</div>
                        <div class="panel-badge">ML FORECAST</div>
                    </div>
                    <div class="chart-container">
                        <canvas id="productionChart"></canvas>
                    </div>
                </div>

                <div class="panel">
                    <div class="panel-header">
                        <div class="panel-title">Health Score Distribution</div>
                        <div class="panel-badge">LIVE DATA</div>
                    </div>
                    <div class="chart-container">
                        <canvas id="healthChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Analytics View -->
        <div id="analyticsView" class="view-section" style="display: none;">
            <!-- Production Data Table -->
            <div class="panel">
                <div class="panel-header">
                    <div class="panel-title">Daily Production Records (30 Days)</div>
                    <div class="panel-badge">INTERACTIVE</div>
                </div>

                <!-- Filters -->
                <div class="filters">
                    <div class="filter-group">
                        <label class="filter-label">Date Range</label>
                        <select id="dateFilter" class="filter-select" onchange="applyFilters()">
                            <option value="all">All Days (30)</option>
                            <option value="7">Last 7 Days</option>
                            <option value="14">Last 14 Days</option>
                            <option value="30">Last 30 Days</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">Production Range</label>
                        <select id="productionFilter" class="filter-select" onchange="applyFilters()">
                            <option value="all">All Production</option>
                            <option value="high">High (>300L)</option>
                            <option value="medium">Medium (280-300L)</option>
                            <option value="low">Low (<280L)</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">Health Status</label>
                        <select id="healthFilter" class="filter-select" onchange="applyFilters()">
                            <option value="all">All Status</option>
                            <option value="excellent">Excellent (>90%)</option>
                            <option value="good">Good (80-90%)</option>
                            <option value="fair">Fair (<80%)</option>
                        </select>
                    </div>
                    <div class="filter-group">
                        <label class="filter-label">Search</label>
                        <input type="text" id="searchInput" class="filter-input" placeholder="Search..." oninput="applyFilters()">
                    </div>
                    <button class="filter-btn clear-btn" onclick="clearFilters()" style="align-self: flex-end;">
                        <i class="fas fa-times"></i> Clear Filters
                    </button>
                </div>

                <div id="filterStatus" style="margin-bottom: 15px; padding: 10px; background: rgba(88, 166, 255, 0.1); border-radius: 6px; display: none;">
                    <span style="color: #58a6ff; font-size: 0.9em;">
                        <i class="fas fa-filter"></i> <span id="filterStatusText">Filters active</span>
                    </span>
                </div>

                <!-- Data Table -->
                <div class="data-table-container">
                    <table class="data-table" id="dataTable">
                        <thead>
                            <tr>
                                <th class="sortable" onclick="sortTable(0)">Date</th>
                                <th class="sortable" onclick="sortTable(1)">Production (L)</th>
                                <th class="sortable" onclick="sortTable(2)">Active Cattle</th>
                                <th class="sortable" onclick="sortTable(3)">Avg Health %</th>
                                <th class="sortable" onclick="sortTable(4)">Feed Used (kg)</th>
                                <th class="sortable" onclick="sortTable(5)">Efficiency %</th>
                                <th class="sortable" onclick="sortTable(6)">Revenue (₹)</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="tableBody">
                            <!-- Data populated by JavaScript -->
                        </tbody>
                    </table>
                </div>

                <!-- Pagination -->
                <div class="pagination">
                    <div class="pagination-info" id="paginationInfo">Showing 1-10 of 30 records</div>
                    <div class="pagination-controls" id="paginationControls">
                        <!-- Generated by JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Performance Charts -->
            <div class="chart-grid">
                <div class="panel">
                    <div class="panel-header">
                        <div class="panel-title">Efficiency Trends</div>
                        <div class="panel-badge">30-DAY</div>
                    </div>
                    <div class="chart-container">
                        <canvas id="efficiencyChart"></canvas>
                    </div>
                </div>

                <div class="panel">
                    <div class="panel-header">
                        <div class="panel-title">Revenue Analysis</div>
                        <div class="panel-badge">FINANCIAL</div>
                    </div>
                    <div class="chart-container">
                        <canvas id="revenueChart"></canvas>
                    </div>
                </div>
            </div>
        </div>

        <!-- Livestock View -->
        <div id="livestockView" class="view-section" style="display: none;">
            <!-- Individual Cattle Performance -->
            <div class="panel">
                <div class="panel-header">
                    <div class="panel-title">Individual Cattle Performance</div>
                    <div class="panel-badge">REAL-TIME</div>
                </div>
                <div class="data-table-container">
                    <table class="data-table">
                        <thead>
                            <tr>
                                <th class="sortable" onclick="sortCattleTable(0)">Cattle ID</th>
                                <th class="sortable" onclick="sortCattleTable(1)">Current Yield (L/day)</th>
                                <th class="sortable" onclick="sortCattleTable(2)">30-Day Avg (L)</th>
                                <th class="sortable" onclick="sortCattleTable(3)">Health Score</th>
                                <th class="sortable" onclick="sortCattleTable(4)">Activity Level</th>
                                <th>Feed Intake</th>
                                <th>Status</th>
                            </tr>
                        </thead>
                        <tbody id="cattleTable">
                            <!-- Populated by JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Cattle Health Chart -->
            <div class="panel">
                <div class="panel-header">
                    <div class="panel-title">Health Score Comparison</div>
                    <div class="panel-badge">COMPARATIVE</div>
                </div>
                <div class="chart-container">
                    <canvas id="cattleHealthChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Reports View -->
        <div id="reportsView" class="view-section" style="display: none;">
            <div class="panel">
                <div class="panel-header">
                    <div class="panel-title">30-Day Performance Report</div>
                    <div class="panel-badge">COMPREHENSIVE</div>
                </div>
                <div style="padding: 20px;">
                    <h3 style="color: #58a6ff; margin-bottom: 20px;">Executive Summary</h3>
                    <div style="background: #0d1117; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
                        <p style="line-height: 1.8; color: #c9d1d9;">
                            Over the past 30 days, the farm has demonstrated strong performance across all key metrics. 
                            Total milk production reached <strong style="color: #58a6ff;">8,947 liters</strong>, representing a 
                            <strong style="color: #3fb950;">15.2% increase</strong> compared to the previous period.
                        </p>
                        <p style="line-height: 1.8; color: #c9d1d9; margin-top: 15px;">
                            The average daily production of <strong style="color: #58a6ff;">298.2L</strong> exceeded targets, 
                            with peak performance on weekdays. Feed efficiency improved to <strong style="color: #58a6ff;">87.5%</strong>, 
                            demonstrating optimal resource utilization. The herd maintains an excellent average health score of 
                            <strong style="color: #3fb950;">91.8%</strong>.
                        </p>
                    </div>

                    <h3 style="color: #58a6ff; margin-bottom: 15px; margin-top: 30px;">Key Insights</h3>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 15px;">
                        <div style="background: #0d1117; padding: 15px; border-radius: 8px; border-left: 3px solid #3fb950;">
                            <strong style="color: #3fb950;">Production Excellence</strong>
                            <p style="font-size: 0.9em; color: #8b949e; margin-top: 5px;">
                                Consistent daily output with upward trend. ML models predict continued growth.
                            </p>
                        </div>
                        <div style="background: #0d1117; padding: 15px; border-radius: 8px; border-left: 3px solid #58a6ff;">
                            <strong style="color: #58a6ff;">Herd Health</strong>
                            <p style="font-size: 0.9em; color: #8b949e; margin-top: 5px;">
                                8 out of 10 cattle performing at excellent levels. Preventive care showing results.
                            </p>
                        </div>
                        <div style="background: #0d1117; padding: 15px; border-radius: 8px; border-left: 3px solid #d29922;">
                            <strong style="color: #d29922;">Resource Optimization</strong>
                            <p style="font-size: 0.9em; color: #8b949e; margin-top: 5px;">
                                Feed efficiency at 87.5%, saving approximately ₹12,000 in costs.
                            </p>
                        </div>
                    </div>

                    <h3 style="color: #58a6ff; margin-bottom: 15px; margin-top: 30px;">Recommendations</h3>
                    <ul style="list-style: none; padding: 0;">
                        <li style="background: #0d1117; padding: 12px; margin-bottom: 8px; border-radius: 6px;">
                            <i class="fas fa-check-circle" style="color: #3fb950;"></i> 
                            Continue current feeding schedule - showing optimal results
                        </li>
                        <li style="background: #0d1117; padding: 12px; margin-bottom: 8px; border-radius: 6px;">
                            <i class="fas fa-check-circle" style="color: #3fb950;"></i> 
                            Monitor cattle BRF-005 and BRF-007 - slight activity reduction noted
                        </li>
                        <li style="background: #0d1117; padding: 12px; margin-bottom: 8px; border-radius: 6px;">
                            <i class="fas fa-check-circle" style="color: #3fb950;"></i> 
                            Maintain preventive health measures - excellent herd health sustained
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <!-- Settings View -->
        <div id="settingsView" class="view-section" style="display: none;">
            <div class="panel">
                <div class="panel-header">
                    <div class="panel-title">System Settings</div>
                    <div class="panel-badge" style="background: rgba(248, 81, 73, 0.1); color: #f85149; border: 1px solid rgba(248, 81, 73, 0.3);">
                        <i class="fas fa-lock"></i> LOCKED BY ADMIN
                    </div>
                </div>
                <div style="padding: 20px;">
                    <div style="background: rgba(248, 81, 73, 0.1); border: 1px solid rgba(248, 81, 73, 0.3); padding: 15px; border-radius: 8px; margin-bottom: 25px;">
                        <i class="fas fa-info-circle" style="color: #f85149;"></i>
                        <strong style="color: #f85149;"> Settings Locked</strong>
                        <p style="color: #c9d1d9; margin-top: 8px; font-size: 0.9em;">
                            System settings are locked by the farm administrator. Contact your system admin to request configuration changes.
                        </p>
                    </div>

                    <h3 style="color: #58a6ff; margin-bottom: 20px;">Dashboard Preferences</h3>
                    <div style="background: #0d1117; padding: 20px; border-radius: 8px; margin-bottom: 20px; opacity: 0.6;">
                        <label style="display: block; margin-bottom: 15px;">
                            <input type="checkbox" checked disabled style="margin-right: 10px; cursor: not-allowed;">
                            Enable real-time data updates
                        </label>
                        <label style="display: block; margin-bottom: 15px;">
                            <input type="checkbox" checked disabled style="margin-right: 10px; cursor: not-allowed;">
                            Show ML forecasts on charts
                        </label>
                        <label style="display: block; margin-bottom: 15px;">
                            <input type="checkbox" checked disabled style="margin-right: 10px; cursor: not-allowed;">
                            Email alerts for critical events
                        </label>
                        <label style="display: block;">
                            <input type="checkbox" checked disabled style="margin-right: 10px; cursor: not-allowed;">
                            Dark mode (currently active)
                        </label>
                    </div>

                    <h3 style="color: #58a6ff; margin-bottom: 20px;">Alert Thresholds</h3>
                    <div style="background: #0d1117; padding: 20px; border-radius: 8px; opacity: 0.6;">
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; color: #8b949e;">Low Production Alert (L/day)</label>
                            <input type="number" value="270" disabled style="width: 100%; padding: 8px; background: #161b22; border: 1px solid #21262d; color: #c9d1d9; border-radius: 6px; cursor: not-allowed;">
                        </div>
                        <div style="margin-bottom: 15px;">
                            <label style="display: block; margin-bottom: 5px; color: #8b949e;">Health Score Warning (%)</label>
                            <input type="number" value="85" disabled style="width: 100%; padding: 8px; background: #161b22; border: 1px solid #21262d; color: #c9d1d9; border-radius: 6px; cursor: not-allowed;">
                        </div>
                        <div>
                            <label style="display: block; margin-bottom: 5px; color: #8b949e;">Feed Efficiency Minimum (%)</label>
                            <input type="number" value="80" disabled style="width: 100%; padding: 8px; background: #161b22; border: 1px solid #21262d; color: #c9d1d9; border-radius: 6px; cursor: not-allowed;">
                        </div>
                    </div>

                    <div style="margin-top: 25px; text-align: center; padding: 20px; background: #0d1117; border-radius: 8px;">
                        <i class="fas fa-shield-alt" style="font-size: 2em; color: #58a6ff; margin-bottom: 10px;"></i>
                        <p style="color: #8b949e; font-size: 0.9em;">
                            Current configuration optimized for dairy farm operations.<br>
                            Last updated by admin: January 15, 2025
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Chatbot -->
    <div class="chatbot-container">
        <button class="chatbot-toggle" onclick="toggleChat()">
            <i class="fas fa-comments"></i>
        </button>
        <div class="chatbot-window" id="chatWindow">
            <div class="chatbot-header">
                <div class="chatbot-title">AI Farm Assistant</div>
                <button class="chatbot-close" onclick="toggleChat()">×</button>
            </div>
            <div class="chatbot-messages" id="chatMessages">
                <div class="chat-message bot">
                    Hello! I'm your AI Farm Assistant. I can help you analyze production data, forecast trends, and monitor herd health.
                    <div class="quick-actions">
                        <div class="quick-action" onclick="quickAsk('production summary')">Production Summary</div>
                        <div class="quick-action" onclick="quickAsk('health report')">Health Report</div>
                        <div class="quick-action" onclick="quickAsk('forecast')">7-Day Forecast</div>
                        <div class="quick-action" onclick="quickAsk('alerts')">System Alerts</div>
                    </div>
                </div>
            </div>
            <div class="chat-typing" id="typing">
                <div class="typing-dots">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            </div>
            <div class="chatbot-input-area">
                <input type="text" class="chatbot-input" id="chatInput" placeholder="Ask me anything..." onkeypress="handleEnter(event)">
                <button class="chatbot-send" onclick="sendChat()"><i class="fas fa-paper-plane"></i></button>
            </div>
        </div>
    </div>

    <script>
        // Generate 30 days of realistic data
        function generateRealisticData() {
            const data = [];
            const today = new Date();
            
            for (let i = 29; i >= 0; i--) {
                const date = new Date(today);
                date.setDate(date.getDate() - i);
                
                // Realistic production with weekly patterns and random variation
                const baseProduction = 290;
                const weekday = date.getDay();
                const weekendBonus = (weekday === 0 || weekday === 6) ? -8 : 0;
                const trend = (29 - i) * 0.3;
                const randomVar = (Math.random() - 0.5) * 15;
                const production = Math.round(baseProduction + weekendBonus + trend + randomVar);
                
                // Health correlates with production
                const baseHealth = 88;
                const healthVar = (Math.random() - 0.3) * 8;
                const health = Math.min(98, Math.max(82, baseHealth + (production - 290) * 0.1 + healthVar));
                
                // Active cattle
                const activeCattle = Math.random() > 0.15 ? 10 : (Math.random() > 0.5 ? 9 : 8);
                
                // Feed efficiency
                const feedUsed = Math.round(production * 0.45 + (Math.random() - 0.5) * 10);
                const efficiency = Math.round((production / feedUsed) * 100 * 2.2);
                
                // Revenue
                const pricePerLiter = 40;
                const revenue = production * pricePerLiter;
                
                data.push({
                    date: date.toISOString().split('T')[0],
                    dateObj: date,
                    production: production,
                    activeCattle: activeCattle,
                    health: Math.round(health * 10) / 10,
                    feedUsed: feedUsed,
                    efficiency: Math.min(95, efficiency),
                    revenue: revenue
                });
            }
            
            return data;
        }

        let farmData = generateRealisticData();
        let filteredData = [...farmData];
        let currentPage = 1;
        let rowsPerPage = 10;
        let sortColumn = -1;
        let sortAscending = true;

        // Individual cattle data
        let cattleData = [
            { id: 'BRF-001', yield: 32.5, avg: 31.2, health: 95, activity: 'High', feed: 'Normal' },
            { id: 'BRF-002', yield: 29.8, avg: 29.1, health: 92, activity: 'High', feed: 'Normal' },
            { id: 'BRF-003', yield: 28.2, avg: 27.8, health: 88, activity: 'Medium', feed: 'Normal' },
            { id: 'BRF-004', yield: 31.1, avg: 30.5, health: 93, activity: 'High', feed: 'Normal' },
            { id: 'BRF-005', yield: 27.5, avg: 27.9, health: 87, activity: 'Medium', feed: 'Reduced' },
            { id: 'BRF-006', yield: 30.2, avg: 29.8, health: 91, activity: 'High', feed: 'Normal' },
            { id: 'BRF-007', yield: 26.8, avg: 28.2, health: 85, activity: 'Low', feed: 'Reduced' },
            { id: 'BRF-008', yield: 33.1, avg: 32.4, health: 96, activity: 'High', feed: 'Normal' },
            { id: 'BRF-009', yield: 29.5, avg: 29.0, health: 90, activity: 'High', feed: 'Normal' },
            { id: 'BRF-010', yield: 28.9, avg: 28.5, health: 89, activity: 'Medium', feed: 'Normal' }
        ];
        let cattleSortColumn = -1;
        let cattleSortAscending = true;

        // Navigation switching
        function switchView(viewName) {
            // Hide all views
            document.querySelectorAll('.view-section').forEach(section => {
                section.style.display = 'none';
            });
            
            // Remove active class from all nav links
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            
            // Show selected view
            document.getElementById(viewName + 'View').style.display = 'block';
            
            // Add active class to clicked nav link
            event.target.classList.add('active');
            
            // Initialize charts if switching to analytics
            if (viewName === 'analytics') {
                setTimeout(() => {
                    initAnalyticsCharts();
                }, 100);
            }
        }

        // Populate cattle table
        function populateCattleTable() {
            const tbody = document.getElementById('cattleTable');
            tbody.innerHTML = cattleData.map(c => {
                const statusClass = c.health >= 90 ? 'excellent' : c.health >= 85 ? 'good' : 'fair';
                return `
                    <tr>
                        <td><strong>${c.id}</strong></td>
                        <td>${c.yield}L</td>
                        <td>${c.avg}L</td>
                        <td>${c.health}%</td>
                        <td>${c.activity}</td>
                        <td>${c.feed}</td>
                        <td><span class="status-indicator status-${statusClass}"></span>${statusClass.toUpperCase()}</td>
                    </tr>
                `;
            }).join('');
        }

        // Sort cattle table
        function sortCattleTable(columnIndex) {
            const headers = document.querySelectorAll('#livestockView .data-table thead th');
            const fields = ['id', 'yield', 'avg', 'health', 'activity'];
            
            if (cattleSortColumn === columnIndex) {
                cattleSortAscending = !cattleSortAscending;
            } else {
                cattleSortColumn = columnIndex;
                cattleSortAscending = true;
            }
            
            // Update header classes
            headers.forEach((h, i) => {
                h.classList.remove('sorted-asc', 'sorted-desc');
                if (i === columnIndex) {
                    h.classList.add(cattleSortAscending ? 'sorted-asc' : 'sorted-desc');
                }
            });
            
            // Sort the cattle data
            cattleData.sort((a, b) => {
                const field = fields[columnIndex];
                let valA = a[field];
                let valB = b[field];
                
                if (typeof valA === 'string') valA = valA.toLowerCase();
                if (typeof valB === 'string') valB = valB.toLowerCase();
                
                if (valA < valB) return cattleSortAscending ? -1 : 1;
                if (valA > valB) return cattleSortAscending ? 1 : -1;
                return 0;
            });
            
            populateCattleTable();
        }

        // Populate main data table
        function populateTable() {
            const tbody = document.getElementById('tableBody');
            const start = (currentPage - 1) * rowsPerPage;
            const end = start + rowsPerPage;
            const pageData = filteredData.slice(start, end);
            
            tbody.innerHTML = pageData.map(row => {
                const statusClass = row.health >= 90 ? 'excellent' : row.health >= 85 ? 'good' : 'fair';
                return `
                    <tr>
                        <td>${row.date}</td>
                        <td><strong>${row.production}L</strong></td>
                        <td>${row.activeCattle}/10</td>
                        <td>${row.health}%</td>
                        <td>${row.feedUsed}kg</td>
                        <td>${row.efficiency}%</td>
                        <td>₹${row.revenue.toLocaleString()}</td>
                        <td><span class="status-indicator status-${statusClass}"></span>${statusClass.toUpperCase()}</td>
                    </tr>
                `;
            }).join('');
            
            updatePaginationInfo();
            updatePaginationControls();
        }

        function updatePaginationInfo() {
            if (filteredData.length === 0) {
                document.getElementById('paginationInfo').textContent = 'No records found';
                return;
            }
            const start = (currentPage - 1) * rowsPerPage + 1;
            const end = Math.min(start + rowsPerPage - 1, filteredData.length);
            document.getElementById('paginationInfo').textContent = 
                `Showing ${start}-${end} of ${filteredData.length} records`;
        }

        function updatePaginationControls() {
            const totalPages = Math.ceil(filteredData.length / rowsPerPage);
            const controls = document.getElementById('paginationControls');
            
            let html = `<button class="page-btn" onclick="goToPage(${currentPage - 1})" ${currentPage === 1 ? 'disabled' : ''}>Previous</button>`;
            
            // Show page numbers
            for (let i = 1; i <= totalPages; i++) {
                if (i === 1 || i === totalPages || (i >= currentPage - 1 && i <= currentPage + 1)) {
                    html += `<button class="page-btn ${i === currentPage ? 'active' : ''}" onclick="goToPage(${i})">${i}</button>`;
                } else if (i === currentPage - 2 || i === currentPage + 2) {
                    html += `<span style="padding: 0 5px; color: #8b949e;">...</span>`;
                }
            }
            
            html += `<button class="page-btn" onclick="goToPage(${currentPage + 1})" ${currentPage === totalPages ? 'disabled' : ''}>Next</button>`;
            controls.innerHTML = html;
        }

        function goToPage(page) {
            const totalPages = Math.ceil(filteredData.length / rowsPerPage);
            if (page < 1 || page > totalPages) return;
            currentPage = page;
            populateTable();
        }

        function sortTable(columnIndex) {
            const headers = document.querySelectorAll('#analyticsView .data-table thead th');
            const fields = ['date', 'production', 'activeCattle', 'health', 'feedUsed', 'efficiency', 'revenue'];
            
            if (sortColumn === columnIndex) {
                sortAscending = !sortAscending;
            } else {
                sortColumn = columnIndex;
                sortAscending = true;
            }
            
            // Update header classes
            headers.forEach((h, i) => {
                h.classList.remove('sorted-asc', 'sorted-desc');
                if (i === columnIndex) {
                    h.classList.add(sortAscending ? 'sorted-asc' : 'sorted-desc');
                }
            });
            
            // Sort the filtered data
            filteredData.sort((a, b) => {
                const field = fields[columnIndex];
                const valA = field === 'date' ? a.dateObj : a[field];
                const valB = field === 'date' ? b.dateObj : b[field];
                
                if (valA < valB) return sortAscending ? -1 : 1;
                if (valA > valB) return sortAscending ? 1 : -1;
                return 0;
            });
            
            currentPage = 1;
            populateTable();
        }

        function applyFilters() {
            const dateFilter = document.getElementById('dateFilter').value;
            const productionFilter = document.getElementById('productionFilter').value;
            const healthFilter = document.getElementById('healthFilter').value;
            const searchText = document.getElementById('searchInput').value.toLowerCase();
            
            // Count active filters
            let activeFilters = 0;
            let filterDescriptions = [];
            
            filteredData = farmData.filter(row => {
                // Date filter
                if (dateFilter !== 'all') {
                    const daysAgo = (new Date() - row.dateObj) / (1000 * 60 * 60 * 24);
                    if (daysAgo > parseInt(dateFilter)) return false;
                }
                
                // Production filter
                if (productionFilter === 'high' && row.production <= 300) return false;
                if (productionFilter === 'medium' && (row.production < 280 || row.production > 300)) return false;
                if (productionFilter === 'low' && row.production >= 280) return false;
                
                // Health filter
                if (healthFilter === 'excellent' && row.health <= 90) return false;
                if (healthFilter === 'good' && (row.health < 80 || row.health > 90)) return false;
                if (healthFilter === 'fair' && row.health >= 80) return false;
                
                // Search filter
                if (searchText && !Object.values(row).some(val => 
                    String(val).toLowerCase().includes(searchText)
                )) return false;
                
                return true;
            });
            
            // Build filter status message
            if (dateFilter !== 'all') {
                activeFilters++;
                filterDescriptions.push(`Last ${dateFilter} days`);
            }
            if (productionFilter !== 'all') {
                activeFilters++;
                filterDescriptions.push(`${productionFilter} production`);
            }
            if (healthFilter !== 'all') {
                activeFilters++;
                filterDescriptions.push(`${healthFilter} health`);
            }
            if (searchText) {
                activeFilters++;
                filterDescriptions.push(`Search: "${searchText}"`);
            }
            
            // Show filter status
            const filterStatus = document.getElementById('filterStatus');
            const filterStatusText = document.getElementById('filterStatusText');
            
            if (activeFilters > 0) {
                filterStatus.style.display = 'block';
                filterStatusText.textContent = `${activeFilters} filter(s) active: ${filterDescriptions.join(', ')} - Showing ${filteredData.length} of ${farmData.length} records`;
            } else {
                filterStatus.style.display = 'none';
            }
            
            currentPage = 1;
            populateTable();
        }

        function clearFilters() {
            document.getElementById('dateFilter').value = 'all';
            document.getElementById('productionFilter').value = 'all';
            document.getElementById('healthFilter').value = 'all';
            document.getElementById('searchInput').value = '';
            
            filteredData = [...farmData];
            currentPage = 1;
            sortColumn = -1;
            sortAscending = true;
            
            // Hide filter status
            document.getElementById('filterStatus').style.display = 'none';
            
            // Clear sort indicators
            document.querySelectorAll('#analyticsView .data-table th').forEach(h => {
                h.classList.remove('sorted-asc', 'sorted-desc');
            });
            
            populateTable();
        }

        // Charts Configuration
        const chartOptions = {
            responsive: true,
            maintainAspectRatio: false,
            plugins: {
                legend: { labels: { color: '#8b949e' } }
            },
            scales: {
                x: {
                    ticks: { color: '#8b949e' },
                    grid: { color: '#21262d' }
                },
                y: {
                    ticks: { color: '#8b949e' },
                    grid: { color: '#21262d' }
                }
            }
        };

        // Initialize dashboard charts
        function initDashboardCharts() {
            // Production Chart
            new Chart(document.getElementById('productionChart'), {
                type: 'line',
                data: {
                    labels: farmData.map(d => d.date.slice(5)),
                    datasets: [{
                        label: 'Actual Production (L)',
                        data: farmData.map(d => d.production),
                        borderColor: '#58a6ff',
                        backgroundColor: 'rgba(88, 166, 255, 0.1)',
                        tension: 0.4,
                        fill: true
                    }, {
                        label: 'ML Forecast',
                        data: farmData.map(d => d.production + (Math.random() - 0.5) * 5),
                        borderColor: '#3fb950',
                        borderDash: [5, 5],
                        tension: 0.4
                    }]
                },
                options: chartOptions
            });

            // Health Chart
            new Chart(document.getElementById('healthChart'), {
                type: 'bar',
                data: {
                    labels: cattleData.map(c => c.id),
                    datasets: [{
                        label: 'Health Score %',
                        data: cattleData.map(c => c.health),
                        backgroundColor: cattleData.map(c => 
                            c.health >= 90 ? '#3fb950' : c.health >= 85 ? '#58a6ff' : '#d29922'
                        ),
                        borderRadius: 4
                    }]
                },
                options: { ...chartOptions, scales: { ...chartOptions.scales, y: { ...chartOptions.scales.y, max: 100 }}}
            });
        }

        // Initialize analytics charts
        function initAnalyticsCharts() {
            // Efficiency Chart
            if (!document.getElementById('efficiencyChart').chart) {
                new Chart(document.getElementById('efficiencyChart'), {
                    type: 'line',
                    data: {
                        labels: farmData.map(d => d.date.slice(5)),
                        datasets: [{
                            label: 'Feed Efficiency %',
                            data: farmData.map(d => d.efficiency),
                            borderColor: '#3fb950',
                            backgroundColor: 'rgba(63, 185, 80, 0.1)',
                            tension: 0.4,
                            fill: true
                        }]
                    },
                    options: chartOptions
                });
            }

            // Revenue Chart
            if (!document.getElementById('revenueChart').chart) {
                new Chart(document.getElementById('revenueChart'), {
                    type: 'bar',
                    data: {
                        labels: farmData.map(d => d.date.slice(5)),
                        datasets: [{
                            label: 'Daily Revenue (₹)',
                            data: farmData.map(d => d.revenue),
                            backgroundColor: '#58a6ff',
                            borderRadius: 4
                        }]
                    },
                    options: chartOptions
                });
            }
        }

        // Initialize livestock charts
        function initLivestockCharts() {
            new Chart(document.getElementById('cattleHealthChart'), {
                type: 'radar',
                data: {
                    labels: cattleData.map(c => c.id),
                    datasets: [{
                        label: 'Current Health Score',
                        data: cattleData.map(c => c.health),
                        borderColor: '#58a6ff',
                        backgroundColor: 'rgba(88, 166, 255, 0.2)',
                    }, {
                        label: 'Target Health Score',
                        data: new Array(cattleData.length).fill(95),
                        borderColor: '#3fb950',
                        backgroundColor: 'rgba(63, 185, 80, 0.1)',
                        borderDash: [5, 5]
                    }]
                },
                options: {
                    ...chartOptions,
                    scales: {
                        r: {
                            ticks: { color: '#8b949e' },
                            grid: { color: '#21262d' },
                            pointLabels: { color: '#8b949e' },
                            max: 100
                        }
                    }
                }
            });
        }

        // Chatbot
        function toggleChat() {
            document.getElementById('chatWindow').classList.toggle('active');
        }

        function handleEnter(e) {
            if (e.key === 'Enter') sendChat();
        }

        function addChatMessage(text, isUser = false) {
            const container = document.getElementById('chatMessages');
            const msg = document.createElement('div');
            msg.className = `chat-message ${isUser ? 'user' : 'bot'}`;
            msg.textContent = text;
            container.appendChild(msg);
            container.scrollTop = container.scrollHeight;
        }

        function quickAsk(query) {
            sendChat(query);
        }

        function sendChat(predefined = null) {
            const input = document.getElementById('chatInput');
            const msg = predefined || input.value.trim();
            if (!msg) return;
            
            addChatMessage(msg, true);
            input.value = '';
            
            document.getElementById('typing').classList.add('active');
            setTimeout(() => {
                document.getElementById('typing').classList.remove('active');
                addChatMessage(getAIResponse(msg.toLowerCase()));
            }, 800);
        }

        function getAIResponse(msg) {
            const totalProduction = farmData.reduce((sum, d) => sum + d.production, 0);
            const avgHealth = farmData.reduce((sum, d) => sum + d.health, 0) / farmData.length;
            const avgEfficiency = farmData.reduce((sum, d) => sum + d.efficiency, 0) / farmData.length;
            
            if (msg.includes('production') || msg.includes('summary')) {
                return `Production Summary (30 days):\n• Total: ${totalProduction}L\n• Daily Average: ${Math.round(totalProduction/30)}L\n• Trend: +15.2% vs last month\n• Peak: ${Math.max(...farmData.map(d => d.production))}L\n• Lowest: ${Math.min(...farmData.map(d => d.production))}L`;
            }
            
            if (msg.includes('health')) {
                const excellent = cattleData.filter(c => c.health >= 90).length;
                const good = cattleData.filter(c => c.health >= 85 && c.health < 90).length;
                const attention = cattleData.filter(c => c.health < 85).length;
                return `Herd Health Report:\n• Average: ${avgHealth.toFixed(1)}%\n• Excellent: ${excellent} cattle\n• Good: ${good} cattle\n• Needs attention: ${attention} cattle\n• Top: ${cattleData[0].id} (${cattleData[0].health}%)`;
            }
            
            if (msg.includes('forecast') || msg.includes('predict')) {
                const nextWeek = Math.round((totalProduction / 30) * 7 * 1.05);
                return `7-Day ML Forecast:\n• Expected: ${nextWeek}L\n• Daily avg: ${Math.round(nextWeek/7)}L\n• Confidence: 94%\n• Trend: Increasing\n• Recommendation: Current schedule optimal`;
            }
            
            if (msg.includes('alert') || msg.includes('status')) {
                return `System Status:\n✓ All systems operational\n✓ No health warnings\n✓ Feed stock: Adequate\n✓ Data pipeline: Running\n• Average efficiency: ${avgEfficiency.toFixed(1)}%`;
            }
            
            if (msg.includes('efficiency') || msg.includes('feed')) {
                return `Feed Efficiency:\n• 30-day average: ${avgEfficiency.toFixed(1)}%\n• Best day: ${Math.max(...farmData.map(d => d.efficiency))}%\n• Total feed used: ${farmData.reduce((s, d) => s + d.feedUsed, 0)}kg\n• Cost savings: ~₹12,000`;
            }
            
            if (msg.includes('revenue') || msg.includes('money') || msg.includes('income')) {
                const totalRevenue = farmData.reduce((s, d) => s + d.revenue, 0);
                return `Revenue Analysis:\n• 30-day total: ₹${totalRevenue.toLocaleString()}\n• Daily average: ₹${Math.round(totalRevenue/30).toLocaleString()}\n• Growth: +15.2%\n• Price/liter: ₹40`;
            }
            
            return `I can provide:\n• Production analysis\n• Health monitoring\n• ML forecasts\n• Efficiency reports\n• Revenue tracking\n• System status\n\nWhat would you like to know?`;
        }

        // Initialize on load
        window.addEventListener('load', () => {
            populateTable();
            populateCattleTable();
            initDashboardCharts();
            
            // Update total milk in header
            const total = farmData.reduce((sum, d) => sum + d.production, 0);
            document.getElementById('totalMilk').textContent = total.toLocaleString() + 'L';
        });
    </script>
</body>
</html>